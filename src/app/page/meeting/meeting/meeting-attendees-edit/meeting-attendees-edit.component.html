<ion-item>
  <ion-label>
    <ion-icon name="person-circle"></ion-icon>
    Organiser
  </ion-label>
  <ion-input  readonly="true" type="text" [value]="meetingDetails?.ownerId.name" class="ion-text-end"  color="medium">
  </ion-input>
  <ion-buttons slot="end">
    <ion-button slot="end" (click)="showSelectOwner=!showSelectOwner">
      <ion-icon slot="icon-only" name="create-outline" color="primary"></ion-icon>
    </ion-button>
  </ion-buttons>
</ion-item>
<app-select-users
  *ngIf="showSelectOwner"
  [sessionInfo]="sessionInfo"
  [alreadySelectedUserList]="meetingDetails?.ownerId? [meetingDetails?.ownerId] : []"
  [multiSelect]="false"
  (onSelectionComplete)="changeMeetingOwner($event)"
  ></app-select-users>
<ion-item *ngIf="!showSelectOwner">
  <ion-avatar slot="start">
    <img
      src="{{(meetingDetails?.ownerId.picUrl) ? meetingDetails?.ownerId.picUrl : 'assets/shapes.svg'}}"
      (error)="profileImgErrorHandler(meetingDetails?.ownerId)"/>
  </ion-avatar>
  <ion-label>
    <h3>{{meetingDetails?.ownerId.name}}</h3>
    <p><small>{{meetingDetails?.ownerId.email}}</small></p>
  </ion-label>
</ion-item>

<ion-item >
  <ion-label><ion-icon name="people-circle"></ion-icon> Attendees</ion-label>
  <ion-input  readonly="true" type="text" [value]="meetingDetails?.attendeeList.length + ' person'" class="ion-text-end"  color="medium">
  </ion-input>
  <ion-buttons slot="end">
    <ion-button slot="end" (click)="showSelectAttendees=!showSelectAttendees">
      <ion-icon slot="icon-only" name="create-outline" color="primary"></ion-icon>
    </ion-button>
  </ion-buttons>
</ion-item>
<app-select-users
  *ngIf="showSelectAttendees"
  [sessionInfo]="sessionInfo"
  [alreadySelectedUserList]="meetingDetails?.attendeeList? meetingDetails?.attendeeList : []"
  [multiSelect]="true"
  [showAddNonPermUser]="true"
  (onSelectionComplete)="processAttendeeList($event)"
  ></app-select-users>
<ion-list *ngIf="!showSelectAttendees">
  <ion-item lines="none">
    <ion-label class="ion-text-wrap">
      <p>Select attendees for the meeting</p>
    </ion-label>
  </ion-item>
  <ion-item-sliding #slide *ngFor="let data of meetingDetails?.attendeeList; let i = index; let c = count;">
    <ion-item [lines]="i==c-1 ? 'none' : '' ">
      <ion-avatar slot="start">
        <img
          src="{{(data.picUrl) ? data.picUrl : 'assets/shapes.svg'}}"
          (error)="profileImgErrorHandler(data)"/>
      </ion-avatar>
      <ion-label>
        <h3>{{data.name}}</h3>
        <p><small>{{data.email}}</small></p>
      </ion-label>
      <ion-icon name="today" slot="end" [color]="data.accepted=='accept' ? 'success' : data.accepted=='decline' ? 'danger' : 'medium'" size="small"></ion-icon>
      <!-- <ion-icon name="finger-print" slot="end" [color]="data.attendance=='present' ? 'success' : data.attendance=='absent' ? 'danger' : 'medium'"  size="small" (click)="slide.open();"></ion-icon> -->
      <ion-buttons slot="end" class="ion-no-margin">
        <!-- <ion-button slot="end" [color]="data.accepted=='accept' ? 'success' : data.accepted=='decline' ? 'danger' : 'medium'"  size="small">
          <ion-icon name="today" slot="icon-only"  size="small"></ion-icon>
        </ion-button> -->
        <ion-button slot="end" [color]="data.attendance=='present' ? 'success' : data.attendance=='absent' ? 'danger' : 'medium'"  size="small" (click)="slide.open(undefined);">
          <ion-icon name="finger-print" slot="icon-only"  size="small"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-item>
    <ion-item-options side="start">
      <ion-item-option color="success" (click)="recordAttendance('present', data, i); slide.close();">
        <ion-icon slot="top" name="finger-print"></ion-icon>
        Present
      </ion-item-option>
      <ion-item-option color="danger" (click)="recordAttendance('absent', data, i); slide.close();">
        <ion-icon slot="top" name="finger-print"></ion-icon>
        Absent
      </ion-item-option>
    </ion-item-options>
  </ion-item-sliding>
</ion-list>
