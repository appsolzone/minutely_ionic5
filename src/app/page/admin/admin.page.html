<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Admin</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-row class="wave-background">
    <ion-col size="12" size-xl="1">
    </ion-col>
    <ion-col>
      <ion-card>
        <ion-card-header>
          <ion-item lines="full">
            <ion-label slot="start">
              <p>Active License</p>
              <h1>{{orgProfile?.noOfUserAllowed -
                orgProfile?.noOfFreeLicense}}-in-{{orgProfile?.noOfUserAllowed}}</h1>
            </ion-label>
            <ion-button color="success" slot="end" fill="solid" size="small" (click)="addMember = !addMember" *ngIf="!addMember">
              <ion-icon name="person-add-outline"></ion-icon> Add user
            </ion-button>
            <ion-button color="danger" slot="end" fill="solid" size="small" (click)="addMember = !addMember" *ngIf="addMember">
              <ion-icon name="arrow-back-outline"></ion-icon> Back
            </ion-button>
          </ion-item>
          <ion-item lines="full" *ngIf="!addMember">
            <ion-icon name="search-outline"></ion-icon>
            <ion-input placeholder="search with name or email" [(ngModel)]="textSearch" (ionInput)="filterAllMembers()"></ion-input>
            <ion-button fill="outline" slot="end" size="small" (click)="filterMemberActionSheet()">
              <ion-icon name="filter-outline"></ion-icon> {{this.filterCategory}}
            </ion-button>
          </ion-item>

        </ion-card-header>
        <ion-card-content>
          <div *ngIf="!addMember">
          <small color="medium">All member list</small>
          <ion-item class="ion-no-padding" *ngFor="let member of allMembers">
            <ion-grid>
            <ion-row>
              <ion-col size="2" class="ion-align-self-start">
                <ion-avatar [ngStyle]="{'height':'40px','width':'40px'}" *ngIf="member?.picUrl != ''">
                  <img src="{{member?.picUrl}}">
                </ion-avatar>
                <h1 *ngIf="!member?.picUrl">
                  <ion-icon color="primary" slot="icon-only" name="person-circle" [ngStyle]="{'height':'40px','width':'40px'}">
                  </ion-icon>
                </h1>
                <span [color]="member.role == 'ADMIN'?'secondary':member.role == 'USER'?'warning':'primary'">{{member?.role}}</span>
              </ion-col>
              <ion-col size="5" class="ion-padding-left">
                <ion-label>
                  <h3>{{member.name}}</h3>
                  <p>{{member.email}}</p>
                  <p>{{member.jobTitle}}</p>
                </ion-label>
              </ion-col>
              <ion-col size="3" class="ion-align-self-start ion-align-items-center">
              <ion-chip [color]="member.status == 'ACTIVE'?'secondary':member.status == 'REQUESTED'?'warning':member.status == 'EXTERNAL'?'primary':'danger'">
                <ion-label>{{member.status}}</ion-label>
              </ion-chip>
              </ion-col>
              <ion-col size="2" class="ion-align-items-end">
              <ion-button fill="clear" (click)="memberManageActionSheet(member)">
                <ion-icon name="ellipsis-vertical-outline"></ion-icon>
              </ion-button>
              </ion-col>
            </ion-row>
           </ion-grid>
          </ion-item>
          </div>
          <div *ngIf="addMember">
            <app-add-member></app-add-member>
          </div>
        </ion-card-content>
      </ion-card>
    </ion-col>
    <ion-col size="12" size-xl="1">
    </ion-col>
  </ion-row>

</ion-content>
